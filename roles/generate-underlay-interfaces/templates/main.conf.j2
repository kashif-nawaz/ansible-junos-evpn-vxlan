/* This block of configuration has been generated by the role generate-underlay-interfaces for Ansible*/
groups {
    GR-CORE-INTF {
        interfaces {
            <*> {
                traps;
                mtu 9216;
                hold-time up 5000 down 0;
               
            }
        }
    }
    GR-EDGE-INTF {
        interfaces {
            <*> {
                traps;
                mtu 9118;
                hold-time up 5000 down 0;
            }
			<ae*> {
                aggregated-ether-options {
                    lacp {
                        active;
                        periodic fast;
                    }
                }
            }
			
        }
    }
}

interfaces {
{% for neighbor in underlay.neighbors %}
       replace:
    {{ neighbor.interface }} {
         apply-groups GR-CORE-INTF;
{% if neighbor.remote_interface is defined %}
        description " * to {{ neighbor.name }} -- {{ neighbor.remote_interface }}";
{% else %}
        description " * to {{ neighbor.name }}";
{% endif %}
        unit 0 {
            family inet {
                address {{ neighbor.local_ip }}/{{ underlay_p2p.network_size }};
            }
{%if  'spine' in group_names  %}
           family mpls;
{% endif %}
        }
    }
{% endfor %}
lo0 {
    unit 0 {
        family inet {
            address {{underlay.loopback_ip}};
        }
    }
}
}



